<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>進貨成本報表</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link href="/sidebar.css" rel="stylesheet">
</head>

<body>
  <div class="container-fluid">
    <div class="row">

      <!-- Sidebar（與 sales.html 相同） -->
      <nav class="col-md-3 col-lg-2 px-3 sidebar">
        <div class="position-sticky">
          <a href="http://localhost:8080/">
            <img src="/logo-pikababy.png" alt="pika baby logo" class="img-fluid d-block mx-auto mb-1 mt-1"
              style="max-height: 150px;">
          </a>
          <div class="accordion" id="sidebarMenu">
            <!--（略，使用與 sales.html 相同的 script 區塊即可）-->
            <script>/* 同 sales.html 中的 document.write 區塊 */</script>
          </div>
        </div>
      </nav>

      <!-- 員工登入 -->
      <div class="dropdown d-flex justify-content-end pe-4 pt-3 user">
        <a href="#" class="d-inline-flex align-items-center text-dark text-decoration-none dropdown-toggle"
          id="userDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-person-circle fs-4 me-2"></i>
          Hi! 總經理 小智
        </a>
        <ul class="dropdown-menu text-small" aria-labelledby="userDropdown">
          <li><a class="dropdown-item" href="#">個人資料設定</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item text-danger" href="#">登出</a></li>
        </ul>
      </div>

      <!-- Main content -->
      <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4 offset-md-3">
        <div class="pt-2">
          <!-- 麵包屑 -->
          <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
            <ol class="breadcrumb">
              <li class="breadcrumb-item">主頁面</li>
              <li class="breadcrumb-item">報表管理</li>
              <li class="breadcrumb-item active" aria-current="page">成本報表</li>
            </ol>
          </nav>

          <!-- 主內容 -->
          <h2>每月進貨成本統計</h2>
          <canvas id="purchaseChart" width="800" height="400"></canvas>
        </div>
      </main>

    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script th:inline="javascript">
    const months = /*[[${months}]]*/[];
    const totals = /*[[${totals}]]*/[];

    new Chart(document.getElementById('purchaseChart'), {
      type: 'bar',
      data: {
        labels: months,
        datasets: [{
          label: '進貨成本',
          data: totals,
          backgroundColor: 'rgba(153, 102, 255, 0.5)',
          borderColor: 'rgba(153, 102, 255, 1)',
          borderWidth: 1
        }]
      },
      options: {
        scales: {
          y: { beginAtZero: true }
        }
      }
    });
  </script>

  <div class="text-end m-3">
    <a class="btn btn-secondary" th:href="@{/}">返回</a>
  </div>
</body>

</html>
