<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>退貨單明細</title>
    <meta charset="UTF-8">
     <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<h2>退貨單明細</h2>

<!-- 主檔資訊 -->
<div>
    <p><strong>退貨單編號：</strong><span th:text="${returnOrder.returnNo}"></span></p>
    <p><strong>退貨日期：</strong><span th:text="${returnOrder.returnDate}"></span></p>
    <p><strong>原始訂單編號：</strong><span th:text="${returnOrder.salesOrder.id}"></span></p>
    <p><strong>客戶名稱：</strong><span th:text="${returnOrder.salesOrder.customer.name}"></span></p>
    <p><strong>退貨原因：</strong><span th:text="${returnOrder.reason}"></span></p>
</div>

<!-- 明細清單 -->
<h3>退貨商品明細</h3>
<table border="1" cellpadding="8">
    <thead>
        <tr>
            <th>商品名稱</th>
            <th>退貨數量</th>
            <th>單價</th>
            <th>小計</th>
        </tr>
    </thead>
    <tbody>
        <tr th:each="item : ${returnOrder.details}">
            <td th:text="${item.product.name}"></td>
            <td th:text="${item.qty}"></td>
            <td th:text="${item.unitPrice}"></td>
            <td th:text="${item.total}"></td>
        </tr>
    </tbody>
    <tfoot>
        <tr>
            <td colspan="3"><strong>總金額</strong></td>
            <td th:text="${#numbers.formatDecimal(
                returnOrder.details.?sum(d -> d.total), 1, 'POINT', 2, 'NONE')}"></td>
        </tr>
    </tfoot>
</table>

<p><a th:href="@{/returns/list}">返回退貨列表</a></p>

</body>
</html>
