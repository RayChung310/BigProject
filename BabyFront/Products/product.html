<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PikaBaby</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="../css/nav.css">
    <style>
        /* Main Content Styles */
        .main-content {
            margin-top: 50px;
            padding: 20px;
        }

        /* ÊéíÂ∫èÂäüËÉΩÂçÄÂüü */
        .sort-container {
            max-width: 1200px;
            margin: 0 auto 20px auto;
            padding: 0 20px;
            display: flex;
            justify-content: flex-end;
        }

        .sort-dropdown {
            position: relative;
            display: inline-block;
        }

        .sort-button {
            padding: 8px 15px;
            background: #fff;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
        }

        .sort-button::after {
            content: "‚ñº";
            font-size: 12px;
            margin-left: 5px;
        }

        .sort-options {
            display: none;
            position: absolute;
            right: 0;
            top: 100%;
            background-color: #fff;
            min-width: 160px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            border-radius: 4px;
            z-index: 1000;
        }

        .sort-dropdown:hover .sort-options {
            display: block;
        }

        .sort-options a {
            color: #333;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .sort-options a:hover {
            background-color: #f5f5f5;
        }

        .sort-options a.active {
            background-color: #FFE135;
            color: #000;
        }

        /* ÁØ©ÈÅ∏Èù¢ÊùøÊ®£Âºè */
        .filter-container {
            max-width: 1200px;
            margin: 0 auto 20px auto;
            padding: 20px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
        }

        .filter-section {
            flex: 1;
            min-width: 200px;
        }

        .filter-title {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
        }

        /* ‰∏ãÊãâÈÅ∏ÂñÆÊ®£Âºè */
        .sort-select,
        .category-select,
        .condition-select {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
            background-color: white;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 16px;
        }

        .sort-select:hover,
        .category-select:hover,
        .condition-select:hover {
            border-color: #999;
        }

        .sort-select:focus,
        .category-select:focus,
        .condition-select:focus {
            outline: none;
            border-color: #FFE135;
            box-shadow: 0 0 3px rgba(255, 225, 53, 0.3);
        }

        /* ÊêúÁ¥¢Ê°ÜÊ®£Âºè */
        .search-box {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }

        .search-box:focus {
            outline: none;
            border-color: #FFE135;
            box-shadow: 0 0 3px rgba(255, 225, 53, 0.3);
        }

        .banner-image {
            width: 1200px;
            height: 1000px;
            margin: auto;
            display: block;
            /* object-fit: cover; */
            margin-bottom: 40px;
        }

        .products-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 30px;
            margin-bottom: 40px;
            padding: 20px;
        }

        .product-card {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            transition: all 0.3s ease;
            width: 100%;
            background-color: #fff;
            text-decoration: none;
            color: inherit;
            cursor: pointer;
            position: relative;
        }

        .product-link {
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .wishlist-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #ccc;
            transition: color 0.3s ease;
            z-index: 2;
        }

        .wishlist-btn:hover {
            color: #ff4d4d;
        }

        .wishlist-btn.active {
            color: #ff4d4d;
        }

        .wishlist-btn:not(.active)::before {
            content: "‚ô°";
        }

        .wishlist-btn.active::before {
            content: "‚ô•";
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: #ff4d4d;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .add-to-cart-btn {
            width: 100%;
            padding: 10px 15px;
            background-color: #FFE135;
            border: none;
            border-radius: 4px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-top: 10px;
        }

        .add-to-cart-btn:hover {
            background-color: #FFD700;
            transform: translateY(-2px);
        }

        .cart-notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 4px;
            z-index: 1000;
            display: none;
            animation: fadeInOut 2s ease-in-out;
        }

        @keyframes fadeInOut {
            0% {
                opacity: 0;
                transform: translateY(-20px);
            }

            15% {
                opacity: 1;
                transform: translateY(0);
            }

            85% {
                opacity: 1;
                transform: translateY(0);
            }

            100% {
                opacity: 0;
                transform: translateY(-20px);
            }
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .product-image {
            width: 250px;
            height: 250px;
            object-fit: contain;
            margin-bottom: 15px;
            transition: transform 0.3s ease;
        }

        .product-card:hover .product-image {
            transform: scale(1.05);
        }

        .product-title {
            font-size: 16px;
            margin: 10px 0;
            color: #333;
        }

        .product-price {
            font-weight: bold;
            color: #e44d26;
        }

        .original-price {
            text-decoration: line-through;
            color: #999;
            font-size: 14px;
            margin-right: 8px;
        }

        .hot-tag {
            color: red;
            font-size: 14px;
            margin-bottom: 5px;
        }

        .product-card {
            text-decoration: none;
            color: inherit;
            position: relative;
        }

        .age-recommendation {
            background-color: #f8f9fa;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 14px;
            color: #666;
            margin-top: 8px;
            text-align: center;
        }
    </style>
</head>

<body>
    <header>
        <!-- ÁΩÆÈ†ÇÁöÑ‰øÉÈä∑Ë®äÊÅØ -->
        <div class="top-banner">
            ÊØèÈÄ±‰∫îÂÖ≠Êó•üî•Êñ∞‰∫∫‰ª£ÁêÜÂØÑË≥£ÂÖçÈÅã
            <font color="red">25 Êó• 23 ÊôÇ 14 ÂàÜ 35 Áßí</font>
            <div style="display: inline-block; background-color: black; color: white">
                Ispian love you
            </div>
        </div>
        <!-- LOGO -->
        <div class="nav-logo-row">
            <img src="../images/pikababy.png" alt="PikaBaby" class="nav-logo" />
        </div>
    </header>
    <!-- Â∞éË¶ΩÂàó -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <!-- <div class="collapse navbar-collapse justify-content-center d-flex" id="navbarSupportedContent"> -->
            <div class="collapse navbar-collapse justify-content-around d-flex" id="navbarSupportedContent">
                <!-- LOGO -->
                <img src="../images/logo-pikababy.png" alt="PikaBaby"
                    style="height: 80px; width: 0px; transition: 3s; display: none;" />
                <ul class="navbar-nav ml-auto nav-links gap-5 me-0">
                    <li class="nav-item d-flex align-items-center">
                        <a href="../index.html">È¶ñÈ†Å</a>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown1" role="button" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                            Âπ¥ÈΩ°ÂçÄÈñì(0-3M)
                        </a>
                        <div class="dropdown-menu p-3 justify-content-center" aria-labelledby="navbarDropdown1">
                            <a class="dropdown-item" href="../Products/product.html?category=feeding">Â•∂Áì∂/Â•∂Âò¥</a>
                            <a class="dropdown-item" href="../Products/product.html?category=clothes">ÂúçÂÖú/ÊèπÂ∑æ</a>
                            <a class="dropdown-item" href="../Products/product.html?category=clothes">Â¨∞ÂÖíÊúçË£ù</a>
                            <a class="dropdown-item" href="../Products/product.html?category=care">Ê∏ÖÊΩîÁî®ÂìÅ</a>
                            <a class="dropdown-item" href="../Products/product.html?category=stroller">Â¨∞ÂÖíÊé®Ëªä</a>
                            <a class="dropdown-item" href="../Products/product.html?category=furniture">Â¨∞ÂÖíÂ∫ä</a>
                            <a class="dropdown-item" href="../Products/product.html?category=feeding">Âì∫‰π≥Áî®ÂìÅ</a>
                            <a class="dropdown-item" href="../Products/product.html?category=care">Â¨∞ÂÖíÁî®ÂìÅ</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown2" role="button" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                            Âπ¥ÈΩ°ÂçÄÈñì(3-6M)
                        </a>
                        <div class="dropdown-menu p-3 justify-content-center" aria-labelledby="navbarDropdown2">
                            <a class="dropdown-item" href="../Products/product.html?category=clothes">Â¨∞ÂÖíÊúçË£ù</a>
                            <a class="dropdown-item" href="../Products/product.html?category=toys">Áé©ÂÖ∑</a>
                            <a class="dropdown-item" href="../Products/product.html?category=stroller">Â¨∞ÂÖíÊé®Ëªä</a>
                            <a class="dropdown-item" href="../Products/product.html?category=furniture">Â¨∞ÂÖíÂ∫ä</a>
                            <a class="dropdown-item" href="../Products/product.html?category=car-seat">Ê±ΩÂ∫ß</a>
                            <a class="dropdown-item" href="../Products/product.html?category=care">Â¨∞ÂÖíÁî®ÂìÅ</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown3" role="button" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                            Âπ¥ÈΩ°ÂçÄÈñì(6-12M)
                        </a>
                        <div class="dropdown-menu p-3 justify-content-center" aria-labelledby="navbarDropdown3">
                            <a class="dropdown-item" href="../Products/product.html?category=walking">Â≠∏Ê≠•Áî®ÂìÅ</a>
                            <a class="dropdown-item" href="../Products/product.html?category=dining">È§êÂÖ∑Áî®ÂìÅ</a>
                            <a class="dropdown-item" href="../Products/product.html?category=clothes">ÂπºÂÖíÊúçË£ù</a>
                            <a class="dropdown-item" href="../Products/product.html?category=toys">Áé©ÂÖ∑</a>
                            <a class="dropdown-item" href="../Products/product.html?category=stroller">Â¨∞ÂÖíÊé®Ëªä</a>
                            <a class="dropdown-item" href="../Products/product.html?category=car-seat">Ê±ΩÂ∫ß</a>
                            <a class="dropdown-item" href="../Products/product.html?category=care">Â¨∞ÂÖíÁî®ÂìÅ</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown4" role="button" data-toggle="dropdown"
                            aria-haspopup="true" aria-expanded="false">
                            Âπ¥ÈΩ°ÂçÄÈñì(2-3y)
                        </a>
                        <div class="dropdown-menu p-3 justify-content-center" aria-labelledby="navbarDropdown4">
                            <a class="dropdown-item" href="../Products/product.html?category=education">ÂπºÊïôÁî®ÂìÅ</a>
                            <a class="dropdown-item" href="../Products/product.html?category=clothes">ÂÖíÁ´•ÊúçË£ù</a>
                            <a class="dropdown-item" href="../Products/product.html?category=toys">Áé©ÂÖ∑</a>
                            <a class="dropdown-item" href="../Products/product.html?category=car-seat">Ê±ΩÂ∫ß</a>
                            <a class="dropdown-item" href="../Products/product.html?category=stroller">ÂÖíÁ´•Êé®Ëªä</a>
                            <a class="dropdown-item" href="../Products/product.html?category=furniture">È§êÊ§Ö</a>
                            <a class="dropdown-item" href="../Products/product.html?category=appliance">ÈõªÂô®Áî®ÂìÅ</a>
                            <a class="dropdown-item" href="../Products/product.html?category=care">Â¨∞ÂÖíÁî®ÂìÅ</a>
                        </div>
                    </li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" id="navbarDropdown5" role="button"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            ‰∫åÊâãË®óÂîÆ
                        </a>
                        <div class="dropdown-menu p-3 justify-content-center gap-5" aria-labelledby="navbarDropdown5">
                            <a class="dropdown-item" href="../Secondhand/consign.html">Ë®óÂîÆÊúçÂãô</a>
                            <a class="dropdown-item" href="../Secondhand/consign_apply.html">‰∫åÊâãË®óÂîÆÁî≥Ë´ã</a>
                            <a class="dropdown-item" href="../Secondhand/consign_search.html">Ë®óÂîÆÁ¥ÄÈåÑÊü•Ë©¢</a>
                            <a class="dropdown-item" href="../Secondhand/withdraw_apply.html">Ë®óÂîÆÊèêÊ¨æÁî≥Ë´ã</a>
                            <a class="dropdown-item" href="../Secondhand/withdraw_search.html">ÊèêÊ¨æÁ¥ÄÈåÑÊü•Ë©¢</a>
                        </div>
                    </li>
                    <li class="nav-item d-flex align-items-center">
                        <a href="../about.html">ÈóúÊñºÊàëÂÄë</a>
                    </li>
                    <ul class="d-flex gap-3">
                        <!-- <li class="nav-item d-flex align-items-center">
                            <a class="fs-5" href="../Shopping/shoppingcart.html">üõí</a>
                        </li> -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" id="navbarDropdown5" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                üõí
                            </a>
                            <div class="dropdown-menu p-3 justify-content-center gap-5"
                                aria-labelledby="navbarDropdown5">
                                <a class="dropdown-item" href="../Shopping/shoppingcart.html">Ë≥ºÁâ©Ëªä</a>
                                <a class="dropdown-item" href="../Shopping/order.html">Ë®ÇÂñÆÊü•Ë©¢</a>
                            </div>
                        </li>
                        <li class="nav-item d-flex align-items-center">
                            <a class="fs-5" href="../Member/login.html">üë§</a>
                        </li>
                    </ul>
                </ul>
            </div>
        </div>
    </nav>

    <!-- ‰∏ªË¶ÅÂÖßÂÆπ -->
    <main class="main-content">
        <!-- BannerÂúñÁâá -->
        <img src="../images/banner.jpg" alt="Banner" class="banner-image">

        <!-- ÁØ©ÈÅ∏Èù¢Êùø -->
        <div class="filter-container">
            <!-- ÊéíÂ∫è‰∏ãÊãâÈÅ∏ÂñÆ -->
            <div class="filter-section">
                <div class="filter-title">ÊéíÂ∫èÊñπÂºè</div>
                <select class="sort-select" id="sort-select">
                    <option value="default">È†êË®≠ÊéíÂ∫è</option>
                    <option value="price-low-high">ÂÉπÊ†ºÂæû‰ΩéÂà∞È´ò</option>
                    <option value="price-high-low">ÂÉπÊ†ºÂæûÈ´òÂà∞‰Ωé</option>
                    <option value="newest">ÊúÄÊñ∞‰∏äÊû∂</option>
                    <option value="hot">ÁÜ±Èä∑Êé®Ëñ¶</option>
                    <option value="brand">ÂìÅÁâå</option>
                </select>
            </div>

            <!-- ÂïÜÂìÅÁ®ÆÈ°ûÁØ©ÈÅ∏ -->
            <div class="filter-section">
                <div class="filter-title">ÂïÜÂìÅÁ®ÆÈ°û</div>
                <select class="category-select" id="category-select">
                    <option value="">ÂÖ®ÈÉ®ÂïÜÂìÅ</option>
                    <option value="feeding">Â•∂Áì∂/Â•∂Âò¥/È§êÂÖ∑</option>
                    <option value="clothes">Â¨∞ÂπºÂÖíÊúçË£ù</option>
                    <option value="care">Ê∏ÖÊΩî/Ë≠∑ÁêÜÁî®ÂìÅ</option>
                    <option value="stroller">Â¨∞ÂÖíÊé®Ëªä</option>
                    <option value="furniture">Â¨∞ÂÖíÂ∫ä/È§êÊ§Ö</option>
                    <option value="toys">Áé©ÂÖ∑</option>
                    <option value="walking">Â≠∏Ê≠•Áî®ÂìÅ</option>
                    <option value="car-seat">Ê±ΩÂ∫ß</option>
                    <option value="education">ÂπºÊïôÁî®ÂìÅ</option>
                    <option value="electronics">ÈõªÂô®Áî®ÂìÅ</option>
                </select>
            </div>

            <!-- ÂïÜÂìÅÁãÄÊÖãÁØ©ÈÅ∏ -->
            <div class="filter-section">
                <div class="filter-title">ÂïÜÂìÅÁãÄÊÖã</div>
                <select class="condition-select" id="condition-select">
                    <option value="">ÂÖ®ÈÉ®</option>
                    <option value="new">ÂÖ®Êñ∞ÂïÜÂìÅ</option>
                    <option value="used">‰∫åÊâãÂïÜÂìÅ</option>
                </select>
            </div>

            <!-- ÈóúÈçµÂ≠óÊêúÂ∞ã -->
            <div class="filter-section">
                <div class="filter-title">ÈóúÈçµÂ≠óÊêúÂ∞ã</div>
                <input type="text" class="search-box" placeholder="Ë´ãËº∏ÂÖ•ÈóúÈçµÂ≠ó...">
            </div>
        </div>

        <!-- ÂïÜÂìÅÂçÄÂ°ä -->
        <div class="products-container">
            <div class="products-grid">
                <!-- ÂïÜÂìÅ1 -->
                <div class="product-card" data-category="toys" data-condition="new">
                    <button class="wishlist-btn" onclick="toggleWishlist(this)"></button>

                    <a href="/Products/product-detail-1.html" class="product-link">
                        <img src="../images/product1.jpg" alt="munchkin Ê¥óÊæ°Áé©ÂÖ∑ÁµÑ" class="product-image">
                        <h3 class="product-title">munchkin Ê¥óÊæ°Áé©ÂÖ∑ÁµÑ</h3>
                        <p class="product-price">ÂîÆÂÉπÔºö250ÂÖÉ</p>
                    </a>
                    <div class="age-recommendation">ÈÅ©ÂêàÔºö3-12ÂÄãÊúà</div>
                    <div class="quantity-control"
                        style="display:flex;justify-content:center;align-items:center;margin-bottom:8px;">
                        <button class="quantity-btn minus" type="button">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99"
                            style="width:40px;text-align:center;margin:0 5px;">
                        <button class="quantity-btn plus" type="button">+</button>
                    </div>
                    <button class="add-to-cart-btn" data-product-id="1" data-product-name="munchkin Ê¥óÊæ°Áé©ÂÖ∑ÁµÑ"
                        data-product-price="250" onclick="addToCart(this)">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                </div>

                <!-- ÂïÜÂìÅ2 -->
                <div class="product-card" data-category="education" data-condition="new">
                    <button class="wishlist-btn" onclick="toggleWishlist(this)"></button>

                    <a href="/Products/product-detail-2.html" class="product-link">
                        <img src="../images/product2.jpg" alt="ToyroyaiÁ©çÊú® Á£ÅÈêµÁµÑ" class="product-image">
                        <h3 class="product-title">ToyroyaiÁ©çÊú® Á£ÅÈêµÁµÑ</h3>
                        <p class="product-price">ÂîÆÂÉπÔºö230ÂÖÉ</p>
                    </a>
                    <div class="age-recommendation">ÈÅ©ÂêàÔºö1-3Ê≠≤</div>
                    <div class="quantity-control"
                        style="display:flex;justify-content:center;align-items:center;margin-bottom:8px;">
                        <button class="quantity-btn minus" type="button">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99"
                            style="width:40px;text-align:center;margin:0 5px;">
                        <button class="quantity-btn plus" type="button">+</button>
                    </div>
                    <button class="add-to-cart-btn" data-product-id="2" data-product-name="ToyroyaiÁ©çÊú® Á£ÅÈêµÁµÑ"
                        data-product-price="230" onclick="addToCart(this)">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                </div>

                <!-- ÂïÜÂìÅ3 -->
                <div class="product-card" data-category="electronics" data-condition="new">
                    <button class="wishlist-btn" onclick="toggleWishlist(this)"></button>

                    <a href="/Products/product-detail-3.html" class="product-link">
                        <img src="../images/product5.png" alt="Chicco Â∞èÁãêÁã∏Á¥ÖÂ§ñÁ∑öËÄ≥Ê∫´Êßç" class="product-image">
                        <h3 class="product-title">Chicco Â∞èÁãêÁã∏Á¥ÖÂ§ñÁ∑öËÄ≥Ê∫´Êßç</h3>
                        <p class="product-price">ÂîÆÂÉπÔºö780ÂÖÉ</p>
                    </a>
                    <div class="age-recommendation">ÈÅ©ÂêàÔºö0-3Ê≠≤</div>
                    <div class="quantity-control"
                        style="display:flex;justify-content:center;align-items:center;margin-bottom:8px;">
                        <button class="quantity-btn minus" type="button">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99"
                            style="width:40px;text-align:center;margin:0 5px;">
                        <button class="quantity-btn plus" type="button">+</button>
                    </div>
                    <button class="add-to-cart-btn" data-product-id="3" data-product-name="Chicco Â∞èÁãêÁã∏Á¥ÖÂ§ñÁ∑öËÄ≥Ê∫´Êßç"
                        data-product-price="780" onclick="addToCart(this)">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                </div>

                <!-- ÂïÜÂìÅ4 -->
                <div class="product-card" data-category="electronics" data-condition="new">
                    <button class="wishlist-btn" onclick="toggleWishlist(this)"></button>

                    <a href="/Products/product-detail-4.html" class="product-link">
                        <img src="../images/product44.jpg" alt="NUNAËç∑Ëò≠-CUDL ClikÂ§öÂäüËÉΩÊèπÂ∏∂" class="product-image">
                        <h3 class="product-title">NUNAËç∑Ëò≠-CUDL ClikÂ§öÂäüËÉΩÊèπÂ∏∂</h3>
                        <p class="product-price">ÂîÆÂÉπÔºö8300ÂÖÉ</p>
                    </a>
                    <div class="age-recommendation">ÈÅ©ÂêàÔºö0Ê≠≤‰ª•‰∏ä</div>
                    <div class="quantity-control"
                        style="display:flex;justify-content:center;align-items:center;margin-bottom:8px;">
                        <button class="quantity-btn minus" type="button">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99"
                            style="width:40px;text-align:center;margin:0 5px;">
                        <button class="quantity-btn plus" type="button">+</button>
                    </div>
                    <button class="add-to-cart-btn" data-product-id="4" data-product-name="NUNAËç∑Ëò≠-CUDL ClikÂ§öÂäüËÉΩÊèπÂ∏∂"
                        data-product-price="8300" onclick="addToCart(this)">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                </div>

                <!-- ÂïÜÂìÅ5 -->
                <div class="product-card" data-category="electronics" data-condition="new">

                    <a href="/Products/product-detail-5.html" class="product-link">
                        <img src="../images/product6.jpg" alt="Fisher Price Ë≤ªÈõ™ little people È®é‰πòÁé©ÂÖ∑"
                            class="product-image">
                        <h3 class="product-title">Fisher Price Ë≤ªÈõ™ È®é‰πòÁé©ÂÖ∑</h3>
                        <p class="product-price">ÂîÆÂÉπÔºö1099ÂÖÉ</p>
                    </a> <button class="wishlist-btn" onclick="toggleWishlist(this)"></button>
                    <div class="age-recommendation">ÈÅ©ÂêàÔºö0Ê≠≤‰ª•‰∏ä</div>
                    <div class="quantity-control"
                        style="display:flex;justify-content:center;align-items:center;margin-bottom:8px;">
                        <button class="quantity-btn minus" type="button">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99"
                            style="width:40px;text-align:center;margin:0 5px;">
                        <button class="quantity-btn plus" type="button">+</button>
                    </div>
                    <button class="add-to-cart-btn" data-product-id="5"
                        data-product-name="Fisher Price Ë≤ªÈõ™ little people È®é‰πòÁé©ÂÖ∑" data-product-price="1099"
                        onclick="addToCart(this)">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                </div>

                <!-- ÂïÜÂìÅ6 -->
                <div class="product-card" data-category="education" data-condition="new">

                    <a href="/Products/product-detail-6.html" class="product-link">
                        <img src="../images/product3.jpg" alt="splash book ÂØ∂ÂØ∂Ê¥óÊæ°Êõ∏" class="product-image">
                        <h3 class="product-title">splash book ÂØ∂ÂØ∂Ê¥óÊæ°Êõ∏</h3>
                        <p class="product-price">ÂîÆÂÉπÔºö165ÂÖÉ</p>
                    </a> <button class="wishlist-btn" onclick="toggleWishlist(this)"></button>
                    <div class="age-recommendation">ÈÅ©ÂêàÔºö6ÂÄãÊúà‰ª•‰∏ä</div>
                    <div class="quantity-control"
                        style="display:flex;justify-content:center;align-items:center;margin-bottom:8px;">
                        <button class="quantity-btn minus" type="button">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99"
                            style="width:40px;text-align:center;margin:0 5px;">
                        <button class="quantity-btn plus" type="button">+</button>
                    </div>
                    <button class="add-to-cart-btn" data-product-id="6" data-product-name="splash book ÂØ∂ÂØ∂Ê¥óÊæ°Êõ∏"
                        data-product-price="165" onclick="addToCart(this)">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                </div>

                <!-- ÂïÜÂìÅ7 -->
                <div class="product-card" data-category="toys" data-condition="used">
                    <button class="wishlist-btn" onclick="toggleWishlist(this)"></button>

                    <a href="/Products/product-detail-7.html" class="product-link">
                        <img src="../images/product4.jpg" alt="Kids II Oball Êñ∞Á±≥Â¶ÆÊ≤ôÊ≤ôÂ¨∞ÂÖíÁêÉ" class="product-image">
                        <h3 class="product-title">Kids II Oball Êñ∞Á±≥Â¶ÆÊ≤ôÊ≤ôÂ¨∞ÂÖíÁêÉ</h3>
                        <p class="product-price">ÂîÆÂÉπÔºö330ÂÖÉ</p>
                    </a>
                    <div class="age-recommendation">ÈÅ©ÂêàÔºö3ÂÄãÊúà‰ª•‰∏ä</div>
                    <div class="quantity-control"
                        style="display:flex;justify-content:center;align-items:center;margin-bottom:8px;">
                        <button class="quantity-btn minus" type="button">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99"
                            style="width:40px;text-align:center;margin:0 5px;">
                        <button class="quantity-btn plus" type="button">+</button>
                    </div>
                    <button class="add-to-cart-btn" data-product-id="7" data-product-name="Kids II Oball Êñ∞Á±≥Â¶ÆÊ≤ôÊ≤ôÂ¨∞ÂÖíÁêÉ"
                        data-product-price="330" onclick="addToCart(this)">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                </div>

                <!-- ÂïÜÂìÅ8 -->
                <div class="product-card" data-category="education" data-condition="new">
                    <button class="wishlist-btn" onclick="toggleWishlist(this)"></button>

                    <a href="/Products/product-detail-8.html" class="product-link">
                        <img src="../images/product6.png" alt="Âæ∑Âúã Hape ÁæéÂæ∑Âç°Â§öÂäüËÉΩÂ≠∏ÁøíÊû∂" class="product-image">
                        <h3 class="product-title">Âæ∑Âúã Hape ÁæéÂæ∑Âç°Â§öÂäüËÉΩÂ≠∏ÁøíÊû∂</h3>
                        <p class="product-price">ÂîÆÂÉπÔºö1180ÂÖÉ</p>
                    </a>
                    <div class="age-recommendation">ÈÅ©ÂêàÔºö1-3Ê≠≤</div>
                    <div class="quantity-control"
                        style="display:flex;justify-content:center;align-items:center;margin-bottom:8px;">
                        <button class="quantity-btn minus" type="button">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99"
                            style="width:40px;text-align:center;margin:0 5px;">
                        <button class="quantity-btn plus" type="button">+</button>
                    </div>
                    <button class="add-to-cart-btn" data-product-id="8" data-product-name="Âæ∑Âúã Hape ÁæéÂæ∑Âç°Â§öÂäüËÉΩÂ≠∏ÁøíÊû∂"
                        data-product-price="1180" onclick="addToCart(this)">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                </div>

                <!-- ÂïÜÂìÅ9 -->
                <div class="product-card" data-category="toys" data-condition="new">
                    <button class="wishlist-btn" onclick="toggleWishlist(this)"></button>

                    <a href="/Products/product-detail-9-1.html" class="product-link">
                        <img src="../images/product7.png" alt="Chicco Â§öÂäüËÉΩÂ∫äÈ†≠Èü≥Ê®ÇÈà¥" class="product-image">
                        <h3 class="product-title">Chicco Â§öÂäüËÉΩÂ∫äÈ†≠Èü≥Ê®ÇÈà¥</h3>
                        <p class="product-price">ÂîÆÂÉπÔºö1580ÂÖÉ</p>
                    </a>
                    <div class="age-recommendation">ÈÅ©ÂêàÔºö0-12ÂÄãÊúà</div>
                    <div class="quantity-control"
                        style="display:flex;justify-content:center;align-items:center;margin-bottom:8px;">
                        <button class="quantity-btn minus" type="button">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99"
                            style="width:40px;text-align:center;margin:0 5px;">
                        <button class="quantity-btn plus" type="button">+</button>
                    </div>
                    <button class="add-to-cart-btn" data-product-id="9" data-product-name="Chicco Â§öÂäüËÉΩÂ∫äÈ†≠Èü≥Ê®ÇÈà¥"
                        data-product-price="1580" onclick="addToCart(this)">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                </div>

                <!-- ÂïÜÂìÅ10 -->
                <div class="product-card" data-category="toys" data-condition="used">
                    <button class="wishlist-btn" onclick="toggleWishlist(this)"></button>

                    <a href="/Products/product-detail-10.html" class="product-link">
                        <img src="../images/product8.jpg" alt="Ê≥ïÂúãJanod-Èü≥Ê®ÇÂ•ΩÂ•ΩÁé©-ÈêµÁê¥" class="product-image">
                        <h3 class="product-title">Ê≥ïÂúãJanod-Èü≥Ê®ÇÂ•ΩÂ•ΩÁé©-ÈêµÁê¥</h3>
                        <p class="product-price">ÂîÆÂÉπÔºö880ÂÖÉ</p>
                    </a>
                    <div class="age-recommendation">ÈÅ©ÂêàÔºö2Ê≠≤‰ª•‰∏ä</div>
                    <div class="quantity-control"
                        style="display:flex;justify-content:center;align-items:center;margin-bottom:8px;">
                        <button class="quantity-btn minus" type="button">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99"
                            style="width:40px;text-align:center;margin:0 5px;">
                        <button class="quantity-btn plus" type="button">+</button>
                    </div>
                    <button class="add-to-cart-btn" data-product-id="10" data-product-name="Ê≥ïÂúãJanod-Èü≥Ê®ÇÂ•ΩÂ•ΩÁé©-ÈêµÁê¥"
                        data-product-price="880" onclick="addToCart(this)">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                </div>

                <!-- ÂïÜÂìÅ11 -->
                <div class="product-card" data-category="clothes" data-condition="new">
                    <button class="wishlist-btn" onclick="toggleWishlist(this)"></button>

                    <a href="/Products/product-detail-11.html" class="product-link">
                        <img src="../images/product11.jpg" alt="Carter's Â¨∞ÂÖíÈÄ£Ë∫´Ë°£" class="product-image">
                        <h3 class="product-title">Carter's ÁôΩÂÖîÈÇ¶Â¶ÆÈï∑Ë¢ñÂåÖËÖ≥ÈÄ£Ë∫´Ë£ù</h3>
                        <p class="product-price">ÂîÆÂÉπÔºö448ÂÖÉ</p>
                    </a>
                    <div class="age-recommendation">ÈÅ©ÂêàÔºö3Ê≠≤‰ª•‰∏ä</div>
                    <div class="quantity-control"
                        style="display:flex;justify-content:center;align-items:center;margin-bottom:8px;">
                        <button class="quantity-btn minus" type="button">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99"
                            style="width:40px;text-align:center;margin:0 5px;">
                        <button class="quantity-btn plus" type="button">+</button>
                    </div>
                    <button class="add-to-cart-btn" data-product-id="11" data-product-name="Carter's Â∞èÁôΩÂÖîÈÇ¶Â¶ÆÈï∑Ë¢ñÂåÖËÖ≥ÈÄ£Ë∫´Ë£ù"
                        data-product-price="448" onclick="addToCart(this)">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                </div>

                <!-- ÂïÜÂìÅ12 -->
                <div class="product-card" data-category="stroller" data-condition="used">
                    <button class="wishlist-btn" onclick="toggleWishlist(this)"></button>

                    <a href="/Products/product-detail-12-1.html" class="product-link">
                        <img src="../images/product12.jpg" alt="Aprica ËºïÈáèÂûãÊé®Ëªä" class="product-image">
                        <h3 class="product-title">Aprica ËºïÈáèÂûãÊé®Ëªä</h3>
                        <p class="product-price">ÂîÆÂÉπÔºö1500ÂÖÉ</p>
                    </a>
                    <div class="age-recommendation">ÈÅ©ÂêàÔºö6ÂÄãÊúà-3Ê≠≤</div>
                    <div class="quantity-control"
                        style="display:flex;justify-content:center;align-items:center;margin-bottom:8px;">
                        <button class="quantity-btn minus" type="button">-</button>
                        <input type="number" class="quantity-input" value="1" min="1" max="99"
                            style="width:40px;text-align:center;margin:0 5px;">
                        <button class="quantity-btn plus" type="button">+</button>
                    </div>
                    <button class="add-to-cart-btn" data-product-id="12" data-product-name="Aprica ËºïÈáèÂûãÊé®Ëªä"
                        data-product-price="1500" onclick="addToCart(this)">Âä†ÂÖ•Ë≥ºÁâ©Ëªä</button>
                </div>
            </div>
        </div>
    </main>

    <!-- È†ÅÂ∞æ -->
    <footer>
        <div class="footer-container align-items-center">
            <div class="footer-section" style="flex: 0;">
                <img src="../images/logo-pikababy.png" alt="PikaBaby" class="footer-logo" />
            </div>
            <div class="footer-section w-100">
                <p class="footer-title">PikaBaby</p>
                <div class="footer-line"></div>
                <p class="mb-1">ÊúçÂãôÊàëÂÄë</p>
                <p class="mb-1">ÂìÅÁâåÁâπËâ≤</p>
            </div>
            <div class="footer-section w-100">
                <h3>ÂìÅÁâåÊúçÂãô</h3>
                <div class="footer-line"></div>
                <p class="mb-1">Baby Store</p>
                <p class="mb-1">‰∫åÊâãÂïÜÂüé</p>
            </div>
            <div class="footer-section w-100">
                <h3>ËÅØÁµ°ÊàëÂÄë</h3>
                <div class="footer-line"></div>
                <p class="mb-1">ËÅØÁµ°ÈõªË©±Ôºö(04) 2326-5860</p>
                <p class="mb-1">ËÅØÁµ°Âú∞ÂùÄÔºöÂè∞‰∏≠Â∏ÇÂçóÂ±ØÂçÄÂÖ¨ÁõäË∑Ø‰∫åÊÆµ51Ëôü18Ê®ì</p>
            </div>
        </div>
    </footer>

    <!-- Ë≥ºÁâ©ËªäÈÄöÁü• -->
    <div class="cart-notification"></div>

    <!-- Â•∂Áì∂ -->
    <div class="floating-bottle"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/navbar.js"></script>
    <script>
        // Ë≥ºÁâ©ËªäÂäüËÉΩ
        function updateCartCount() {
            let cart = JSON.parse(localStorage.getItem('cart')) || [];
            let count = cart.reduce((sum, item) => sum + item.quantity, 0);
            const cartCount = document.querySelector('.cart-count');
            if (cartCount) {
                cartCount.textContent = count;
                cartCount.style.display = count > 0 ? 'flex' : 'none';
            }
        }
        document.addEventListener('DOMContentLoaded', function () {
            updateCartCount();
            // Êï∏ÈáèÊéßÂà∂ÊåâÈàï
            document.querySelectorAll('.quantity-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    const input = this.parentElement.querySelector('.quantity-input');
                    const currentValue = parseInt(input.value);

                    if (this.classList.contains('minus')) {
                        if (currentValue > 1) {
                            input.value = currentValue - 1;
                        }
                    } else {
                        if (currentValue < 99) {
                            input.value = currentValue + 1;
                        }
                    }
                });
            });

            // Âä†ÂÖ•Ë≥ºÁâ©ËªäÊåâÈàï
            document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
                btn.addEventListener('click', function () {
                    let cart = JSON.parse(localStorage.getItem('cart')) || [];
                    const productId = this.dataset.productId;
                    const productName = this.dataset.productName;
                    const productPrice = parseFloat(this.dataset.productPrice);
                    const quantityInput = this.parentElement.querySelector('.quantity-input');
                    const quantity = quantityInput ? parseInt(quantityInput.value) : 1;

                    // Ê™¢Êü•Ë≥ºÁâ©Ëªä‰∏≠ÊòØÂê¶Â∑≤ÊúâÊ≠§ÂïÜÂìÅ
                    const existingItem = cart.find(item => item.id === productId);

                    if (existingItem) {
                        existingItem.quantity += quantity;
                    } else {
                        cart.push({
                            id: productId,
                            name: productName,
                            price: productPrice,
                            quantity: quantity,
                            image: this.closest('.product-card').querySelector('.product-image').src
                        });
                    }

                    // ‰øùÂ≠òÂà∞ localStorage
                    localStorage.setItem('cart', JSON.stringify(cart));

                    // Êõ¥Êñ∞Ë≥ºÁâ©ËªäÊï∏Èáè
                    updateCartCount();

                    // ÂΩàÁ™óÈÄöÁü•
                    alert(`Â∑≤Â∞á ${productName} Âä†ÂÖ•Ë≥ºÁâ©ËªäÔºåÊï∏ÈáèÔºö${quantity}ÔºåÂÉπÊ†ºÔºö${productPrice}`);
                });
            });

            // È°ØÁ§∫ÈÄöÁü•
            function showNotification(message) {
                const notification = document.querySelector('.cart-notification');
                notification.textContent = message;
                notification.style.display = 'block';

                setTimeout(() => {
                    notification.style.display = 'none';
                }, 2000);
            }
        });

        // Â§öÂàÜÈ†ÅÂêåÊ≠•Ë≥ºÁâ©ËªäÊï∏Â≠ó
        window.addEventListener('storage', function (e) {
            if (e.key === 'cart') {
                updateCartCount();
            }
        });

        // Êï¥ÂêàÁöÑÁØ©ÈÅ∏ÂíåÊéíÂ∫èÂäüËÉΩ
        document.addEventListener('DOMContentLoaded', function () {
            const products = document.querySelectorAll('.product-card');
            const sortSelect = document.getElementById('sort-select');
            const categorySelect = document.getElementById('category-select');
            const conditionSelect = document.getElementById('condition-select');
            const searchBox = document.querySelector('.search-box');

            // ÂÖ®Â±ÄËÆäÈáè‰æÜÂ≠òÂÑ≤Áï∂ÂâçÁöÑÁØ©ÈÅ∏Ê¢ù‰ª∂
            let currentFilters = {
                category: '',
                condition: '',
                search: '',
                sort: 'default'
            };

            // ÊéíÂ∫èÂáΩÊï∏
            function sortProducts(products, sortBy) {
                const productsArray = Array.from(products);

                switch (sortBy) {
                    case 'price-low-high':
                        return productsArray.sort((a, b) => {
                            const priceA = parseInt(a.querySelector('.product-price').textContent.match(/\d+/)[0]);
                            const priceB = parseInt(b.querySelector('.product-price').textContent.match(/\d+/)[0]);
                            return priceA - priceB;
                        });
                    case 'price-high-low':
                        return productsArray.sort((a, b) => {
                            const priceA = parseInt(a.querySelector('.product-price').textContent.match(/\d+/)[0]);
                            const priceB = parseInt(b.querySelector('.product-price').textContent.match(/\d+/)[0]);
                            return priceB - priceA;
                        });
                    case 'newest':
                        return productsArray; // ‰øùÊåÅÂéüÊúâÈ†ÜÂ∫èÔºåÂÅáË®≠ÊòØÊåâÊúÄÊñ∞ÊéíÂ∫è
                    case 'hot':
                        return productsArray.sort((a, b) => {
                            const isHotA = a.querySelector('.hot-tag') !== null;
                            const isHotB = b.querySelector('.hot-tag') !== null;
                            return isHotB - isHotA;
                        });
                    case 'brand':
                        return productsArray.sort((a, b) => {
                            const titleA = a.querySelector('.product-title').textContent;
                            const titleB = b.querySelector('.product-title').textContent;
                            return titleA.localeCompare(titleB, 'zh-TW');
                        });
                    default:
                        return productsArray;
                }
            }

            // Êï¥ÂêàÁöÑÁØ©ÈÅ∏ÂíåÊéíÂ∫èÂáΩÊï∏
            function filterAndSortProducts() {
                products.forEach(product => {
                    const productCategory = product.dataset.category;
                    const productCondition = product.dataset.condition;
                    const productTitle = product.querySelector('.product-title').textContent.toLowerCase();

                    const matchesCategory = !currentFilters.category || productCategory === currentFilters.category;
                    const matchesCondition = !currentFilters.condition || productCondition === currentFilters.condition;
                    const matchesSearch = !currentFilters.search || productTitle.includes(currentFilters.search.toLowerCase());

                    if (matchesCategory && matchesCondition && matchesSearch) {
                        product.style.display = '';
                        product.style.opacity = '1';
                        product.style.transform = 'translateY(0)';
                    } else {
                        product.style.display = 'none';
                        product.style.opacity = '0';
                        product.style.transform = 'translateY(20px)';
                    }
                });

                // ÊéíÂ∫èÂèØË¶ãÁöÑÂïÜÂìÅ
                const visibleProducts = Array.from(products).filter(p => p.style.display !== 'none');
                const sortedProducts = sortProducts(visibleProducts, currentFilters.sort);

                // ÈáçÊñ∞ÊéíÂàóDOM
                const productsGrid = document.querySelector('.products-grid');
                sortedProducts.forEach(product => {
                    productsGrid.appendChild(product);
                });

                // Ê™¢Êü•ÊòØÂê¶ÊúâÈ°ØÁ§∫ÁöÑÂïÜÂìÅ
                const noResultsMessage = document.querySelector('.no-results-message');
                if (visibleProducts.length === 0) {
                    if (!noResultsMessage) {
                        const message = document.createElement('div');
                        message.className = 'no-results-message';
                        message.style.textAlign = 'center';
                        message.style.padding = '20px';
                        message.style.color = '#666';
                        message.textContent = 'Ê≤íÊúâÁ¨¶ÂêàÊ¢ù‰ª∂ÁöÑÂïÜÂìÅ';
                        productsGrid.appendChild(message);
                    }
                } else if (noResultsMessage) {
                    noResultsMessage.remove();
                }

                // Êõ¥Êñ∞ÈÅ∏ÊìáÂô®ÁöÑÁãÄÊÖã
                if (categorySelect && currentFilters.category) {
                    categorySelect.value = currentFilters.category;
                }
                if (conditionSelect && currentFilters.condition) {
                    conditionSelect.value = currentFilters.condition;
                }
                if (sortSelect && currentFilters.sort) {
                    sortSelect.value = currentFilters.sort;
                }
            }

            // ‰øÆÊîπ filterProducts ÂáΩÊï∏Ôºå‰ΩøÂÖ∂ËÉΩÂ§†ËôïÁêÜ URL ÂèÉÊï∏
            window.filterProducts = function (category) {
                // Êõ¥Êñ∞ URL ÂèÉÊï∏
                const url = new URL(window.location.href);
                url.searchParams.set('category', category);
                window.history.pushState({}, '', url);

                // Êõ¥Êñ∞Áï∂ÂâçÁØ©ÈÅ∏Ê¢ù‰ª∂
                currentFilters.category = category;

                // Êõ¥Êñ∞ÈÅ∏ÊìáÂô®
                if (categorySelect) {
                    categorySelect.value = category;
                }

                // Âü∑Ë°åÁØ©ÈÅ∏
                filterAndSortProducts();
            };

            // È†ÅÈù¢ËºâÂÖ•ÊôÇÊ™¢Êü• URL ÂèÉÊï∏
            document.addEventListener('DOMContentLoaded', function () {
                const urlParams = new URLSearchParams(window.location.search);
                const categoryParam = urlParams.get('category');

                if (categoryParam) {
                    filterProducts(categoryParam);
                }
            });

            // Ê∑ªÂä†‰∫ã‰ª∂Áõ£ËÅΩÂô®
            if (sortSelect) {
                sortSelect.addEventListener('change', function () {
                    currentFilters.sort = this.value;
                    filterAndSortProducts();
                });
            }

            if (categorySelect) {
                categorySelect.addEventListener('change', function () {
                    currentFilters.category = this.value;
                    filterAndSortProducts();
                });
            }

            if (conditionSelect) {
                conditionSelect.addEventListener('change', function () {
                    currentFilters.condition = this.value;
                    filterAndSortProducts();
                });
            }

            if (searchBox) {
                // ÁÇ∫ÊêúÁ¥¢Ê°ÜÊ∑ªÂä†Èò≤ÊäñÂãïÁöÑ‰∫ã‰ª∂Áõ£ËÅΩÂô®
                let searchTimeout;
                searchBox.addEventListener('input', function () {
                    clearTimeout(searchTimeout);
                    searchTimeout = setTimeout(() => {
                        currentFilters.search = this.value;
                        filterAndSortProducts();
                    }, 300);
                });
            }

            // Ê∑ªÂä†ÂïÜÂìÅÂç°ÁâáÁöÑÈÅéÊ∏°ÊïàÊûú
            products.forEach(product => {
                product.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
            });

            // ÂàùÂßãÂåñÁØ©ÈÅ∏
            filterAndSortProducts();
        });

        // È°òÊúõÊ∏ÖÂñÆÂäüËÉΩ
        function toggleWishlist(button) {
            button.classList.toggle('active');
            const productCard = button.closest('.product-card');
            const productId = productCard.querySelector('.add-to-cart-btn').dataset.productId;
            const productName = productCard.querySelector('.product-title').textContent;
            const productPrice = productCard.querySelector('.product-price').textContent.match(/\d+/)[0];
            const productImage = productCard.querySelector('.product-image').src;

            // ÁôºÈÄÅË´ãÊ±ÇÂà∞ÂæåÁ´ØAPI
            fetch('/api/wishlist/toggle', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    productId: productId,
                    name: productName,
                    price: productPrice,
                    image: productImage
                })
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    if (button.classList.contains('active')) {
                        showNotification(`Â∑≤Â∞á ${productName} Âä†ÂÖ•È°òÊúõÊ∏ÖÂñÆ`);
                    } else {
                        showNotification(`Â∑≤Â∞á ${productName} ÂæûÈ°òÊúõÊ∏ÖÂñÆÁßªÈô§`);
                    }
                })
                .catch(error => {
                    console.error('Error:', error);
                    showNotification('Êìç‰ΩúÂ§±ÊïóÔºåË´ãÁ®çÂæåÂÜçË©¶');
                    button.classList.toggle('active'); // ÊÅ¢Âæ©ÊåâÈàïÁãÄÊÖã
                });
        }

        // Âä†ÂÖ•Ë≥ºÁâ©ËªäÂäüËÉΩ
        function addToCart(button) {
            const productId = button.dataset.productId;
            const productName = button.dataset.productName;
            const productPrice = parseFloat(button.dataset.productPrice);
            const productImage = button.closest('.product-card').querySelector('.product-image').src;
            const quantityInput = button.parentElement.querySelector('.quantity-input');
            const quantity = quantityInput ? parseInt(quantityInput.value) : 1;

            // ÁôºÈÄÅË´ãÊ±ÇÂà∞ÂæåÁ´ØAPI
            fetch('/api/cart/add', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    productId: productId,
                    name: productName,
                    price: productPrice,
                    quantity: quantity,
                    image: productImage
                })
            })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('Network response was not ok');
                    }
                    return response.json();
                })
                .then(data => {
                    // Êõ¥Êñ∞Ë≥ºÁâ©ËªäÊï∏Èáè
                    updateCartCount();
                    // È°ØÁ§∫ÊàêÂäüË®äÊÅØÔºàÂê´Êï∏ÈáèÂíåÁ∏ΩÂÉπÔºâ
                    showNotification(`Â∑≤Â∞á ${quantity} ‰ª∂ ${productName} Âä†ÂÖ•Ë≥ºÁâ©ËªäÔºåÁ∏ΩÂÉπÔºö${productPrice * quantity} ÂÖÉ`);
                })
                .catch(error => {
                    console.error('Error:', error);
                    showNotification('Âä†ÂÖ•Ë≥ºÁâ©ËªäÂ§±ÊïóÔºåË´ãÁ®çÂæåÂÜçË©¶');
                });
        }

        function applyCategoryFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const categoryParam = urlParams.get('category');
            if (categoryParam) {
                filterProducts(categoryParam);
            } else {
                // Ëã•ÁÑ°ÂèÉÊï∏ÂâáÈ°ØÁ§∫ÂÖ®ÈÉ®
                filterProducts('');
            }
        }

        // È†ÅÈù¢ËºâÂÖ•ÊôÇ
        document.addEventListener('DOMContentLoaded', function () {
            applyCategoryFromURL();
        });

        // Á∂≤ÂùÄËÆäÂãïÊôÇÔºà‰æãÂ¶Ç‰ΩøÁî®ËÄÖÈªûÊìäÂ∞éË¶ΩÂàóÂàÜÈ°ûÔºâ
        window.addEventListener('popstate', function () {
            applyCategoryFromURL();
        });
    </script>


</body>

</html>